(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(16),c=t.n(a),u=(t(21),t(1)),s=t.n(u),o=t(4),i=t(5),d=t(0),f=function(e){var n=e.filter,t=e.handleFilterChange;return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:t,onChange:r})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:a,onChange:c})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return Object(d.jsx)("ul",{children:n.filter((function(e){return""===t||e.name.toLowerCase().indexOf(t.toLowerCase())>-1})).map((function(e){return Object(d.jsxs)("li",{children:[e.name," ",e.number," ",Object(d.jsx)("button",{onClick:function(){return r(e.id)},children:"delete"})]},e.name)}))})},p=t(6),j=t.n(p),h="/api/persons",m={createPerson:function(){var e=Object(o.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(h,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),getPersons:function(){var e=Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(h);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat(h,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(o.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("".concat(h,"/").concat(n.id),n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},v=(t(42),function(e){var n=e.message,t=e.className;return void 0===n?null:Object(d.jsx)("div",{className:t,children:n})}),O=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),p=u[0],j=u[1],h=Object(r.useState)(""),O=Object(i.a)(h,2),x=O[0],w=O[1],g=Object(r.useState)(""),k=Object(i.a)(g,2),C=k[0],N=k[1],y=Object(r.useState)(void 0),P=Object(i.a)(y,2),S=P[0],D=P[1],L=Object(r.useState)(void 0),A=Object(i.a)(L,2),E=A[0],F=A[1];Object(r.useEffect)((function(){m.getPersons().then((function(e){a(e)}))}),[]);var I=function(){j(""),w("")},J=function(e){D(e),setTimeout((function(){D(void 0)}),5e3)},T=function(){var e=Object(o.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))){e.next=3;break}return I(),e.abrupt("return");case 3:return n.number=x,e.prev=4,e.next=7,m.updatePerson(n);case 7:r=e.sent,a(t.map((function(e){return e.id!==r.id?e:r}))),J("Updated ".concat(n.name)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),c="Information of ".concat(n.name," has already been removed from server"),F(c),setTimeout((function(){F(void 0)}),5e3),a(t.filter((function(e){return e.id!==n.id})));case 17:case"end":return e.stop()}var c}),e,null,[[4,12]])})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(s.a.mark((function e(n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(r=t.find((function(e){return e.name.toLowerCase()===p.toLowerCase()})))){e.next=7;break}return e.next=5,T(r);case 5:return I(),e.abrupt("return");case 7:return r={name:p,number:x},e.next=10,m.createPerson(r);case 10:c=e.sent,a(t.concat(c)),J("Added ".concat(c.name)),I();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(null===(r=t.find((function(e){return e.id===n})))||void 0===r?void 0:r.name,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m.deletePerson(n);case 4:a(t.filter((function(e){return e.id!==n})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(v,{message:S,className:"success"}),Object(d.jsx)(v,{message:E,className:"error"}),Object(d.jsx)(f,{filter:C,handleFilterChange:function(e){N(e.target.value)}}),Object(d.jsx)("h3",{children:"Add a new"}),Object(d.jsx)(b,{addPerson:B,newName:p,newNumber:x,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(l,{filter:C,persons:t,handleDelete:U})]})};c.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.96d70eef.chunk.js.map