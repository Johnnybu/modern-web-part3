(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(17),c=t.n(a),u=(t(22),t(1)),o=t.n(u),s=t(8),i=t(4),d=t(5),l=t(0),f=function(e){var n=e.filter,t=e.handleFilterChange;return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:r})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:a,onChange:c})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return Object(l.jsx)("ul",{children:n.filter((function(e){return""===t||e.name.toLowerCase().indexOf(t.toLowerCase())>-1})).map((function(e){return Object(l.jsxs)("li",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(){return r(e.id)},children:"delete"})]},e.name)}))})},j=t(6),h=t.n(j),v="/api/persons",m={createPerson:function(){var e=Object(i.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(v,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),getPersons:function(){var e=Object(i.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(v);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(v,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(i.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(v,"/").concat(n.id),n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},O=(t(43),function(e){var n=e.message,t=e.className;return void 0===n?null:Object(l.jsx)("div",{className:t,children:n})}),x=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),u=Object(d.a)(c,2),j=u[0],h=u[1],v=Object(r.useState)(""),x=Object(d.a)(v,2),w=x[0],g=x[1],k=Object(r.useState)(""),C=Object(d.a)(k,2),N=C[0],y=C[1],P=Object(r.useState)(void 0),S=Object(d.a)(P,2),D=S[0],L=S[1],A=Object(r.useState)(void 0),E=Object(d.a)(A,2),F=E[0],I=E[1];Object(r.useEffect)((function(){m.getPersons().then((function(e){a(e)}))}),[]);var J=function(){h(""),g("")},T=function(e){L(e),setTimeout((function(){L(void 0)}),5e3)},B=function(e){I(e),setTimeout((function(){I(void 0)}),5e3)},U=function(){var e=Object(i.a)(o.a.mark((function e(n){var r,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))){e.next=3;break}return J(),e.abrupt("return");case 3:return r=Object(s.a)(Object(s.a)({},n),{},{number:w}),e.prev=4,e.next=7,m.updatePerson(r);case 7:c=e.sent,a(t.map((function(e){return e.id!==c.id?e:c}))),T("Updated ".concat(n.name)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.data)?B(e.t0.response.data.error):(B("Information of ".concat(n.name," has already been removed from server")),a(t.filter((function(e){return e.id!==n.id}))));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(o.a.mark((function e(n){var r,c,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(r=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()})))){e.next=7;break}return e.next=5,U(r);case 5:return J(),e.abrupt("return");case 7:return r={name:j,number:w},e.prev=8,e.next=11,m.createPerson(r);case 11:c=e.sent,a(t.concat(c)),T("Added ".concat(c.name)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),B(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.error);case 19:J();case 20:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(null===(r=t.find((function(e){return e.id===n})))||void 0===r?void 0:r.name,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m.deletePerson(n);case 4:a(t.filter((function(e){return e.id!==n})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(O,{message:D,className:"success"}),Object(l.jsx)(O,{message:F,className:"error"}),Object(l.jsx)(f,{filter:N,handleFilterChange:function(e){y(e.target.value)}}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(b,{addPerson:q,newName:j,newNumber:w,handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(p,{filter:N,persons:t,handleDelete:z})]})};c.a.render(Object(l.jsx)(x,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.f0a45ad2.chunk.js.map