{"version":3,"sources":["Filter.js","PersonForm.js","Persons.js","services/persons.js","Notification.js","App.js","index.js"],"names":["Filter","filter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","handleDelete","person","name","toLowerCase","indexOf","map","number","onClick","id","baseUrl","PersonsService","createPerson","a","axios","post","response","data","getPersons","get","deletePerson","delete","updatePerson","put","Notification","message","className","undefined","App","useState","setPersons","setNewName","setNewNumber","setFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","then","resetInput","displaySuccess","setTimeout","window","confirm","updatedPerson","console","log","p","event","preventDefault","find","newPerson","concat","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.96d70eef.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({filter, handleFilterChange}) => {\n  return(\n    <div>\n      filter shown with <input\n        value={filter}\n        onChange={handleFilterChange}\n      />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n        <form onSubmit={addPerson}>\n        <div>\n          name: <input \n            value={newName}\n            onChange={handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input \n            value={newNumber}\n            onChange={handleNumberChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({persons, filter, handleDelete}) => {\n    return (\n      <ul>\n        {\n          persons.filter(person => filter === '' ? true : person.name.toLowerCase().indexOf(filter.toLowerCase()) > -1)\n            .map( person => <li key={person.name}>{person.name} {person.number} <button onClick={() => handleDelete(person.id)}>delete</button></li>)\n        }\n      </ul>\n    );\n};\n\nexport default Persons;\n","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst createPerson = async person => {\n    const response = await axios.post(baseUrl, person);\n    return response.data;\n};\n\nconst getPersons = async () => {\n    const response = await axios.get(baseUrl);\n    return response.data;\n};\n\nconst deletePerson = async id => {\n    return await axios.delete(`${baseUrl}/${id}`);\n};\n\nconst updatePerson = async person => {\n    const response = await axios.put(`${baseUrl}/${person.id}`, person);\n    return response.data;\n};\n\nconst PersonsService = {\n    createPerson,\n    getPersons,\n    deletePerson,\n    updatePerson\n};\n\nexport default PersonsService;","import React from 'react';\nimport './Notification.css';\n\nconst Notification = ({ message, className }) => {\n  if (message === undefined) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import React, { useEffect, useState } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport PersonsService from './services/persons';\nimport Notification from './Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [successMessage, setSuccessMessage] = useState(undefined);\n  const [errorMessage, setErrorMessage] = useState(undefined);\n  \n  useEffect(() => {\n    PersonsService.getPersons()\n      .then(persons => {\n        setPersons(persons);\n      });\n  }, []);\n\n  const resetInput = () => {\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const displaySuccess = message => {\n    setSuccessMessage(message);\n    setTimeout(() => {\n      setSuccessMessage(undefined);\n    }, 5000);\n  };\n\n  const displayError = message => {\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(undefined);\n    }, 5000);\n  };\n\n  const updatePerson = async (person) => {\n    if (!window.confirm(`${person.name} is already added to the phonebook, replace the old number with a new one?`)) {\n      resetInput();\n      return;\n    }\n\n    person.number = newNumber;\n    \n    try {\n      const updatedPerson = await PersonsService.updatePerson(person);\n\n      setPersons(persons.map(person => person.id !== updatedPerson.id ? person : updatedPerson));\n\n      displaySuccess(`Updated ${person.name}`);\n    } catch (error) {\n      console.log(error);\n\n      displayError(`Information of ${person.name} has already been removed from server`);\n      \n      setPersons(persons.filter(p => p.id !== person.id));\n    }\n  };\n\n  const addPerson = async (event) => {\n    event.preventDefault();\n\n    let person = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n\n    if (person) {\n      await updatePerson(person);\n      resetInput();\n      return;\n    }\n\n    person = {\n      name: newName,\n      number: newNumber\n    };\n\n    const newPerson = await PersonsService.createPerson(person);\n\n    setPersons(persons.concat(newPerson));\n\n    displaySuccess(`Added ${newPerson.name}`);\n\n    resetInput();\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(`Delete ${persons.find(p => p.id === id)?.name}?`)) {\n      return;\n    }\n\n    await PersonsService.deletePerson(id);\n\n    setPersons(persons.filter(p => p.id !== id));\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={successMessage} className='success' />\n\n      <Notification message={errorMessage} className='error' />\n\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm addPerson={addPerson} newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n\n      <h2>Numbers</h2>\n      \n      <Persons filter={filter} persons={persons} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}